//
//  PathTests.swift
//  SVGKit
//
//  Created by maralla on 2025/4/7.
//

import Foundation
import Testing

@testable import SVGKit

struct PathTests {
    @Test func pasePath() async throws {
        let cases: [(d: String, e: String)] = [
            (
                d: "M 10 10 H 90 V 90 H 10 Z",
                e: "[M 10.0 10.0, L 90.0 10.0, L 90.0 90.0, L 10.0 90.0, Z]"
            ),
            (
                d: "M 10 10 h 80 v 80 h -80 Z",
                e: "[M 10.0 10.0, L 90.0 10.0, L 90.0 90.0, L 10.0 90.0, Z]"
            ),
            (
                d: "M 70 110 C 70 140, 110 140, 110 110",
                e: "[M 70.0 110.0, C 70.0 140.0, 110.0 140.0, 110.0 110.0]"
            ),
            (
                d: "M 10 80 C 40 10, 65 10, 95 80 S 150 150, 180 80",
                e: "[M 10.0 80.0, C 40.0 10.0, 65.0 10.0, 95.0 80.0, C 125.0 150.0, 150.0 150.0, 180.0 80.0]"
            ),
            (
                d: "M 10 80 Q 95 10 180 80",
                e: "[M 10.0 80.0, Q 95.0 10.0, 180.0 80.0]"
            ),
            (
                d: "M 10 80 Q 52.5 10, 95 80 T 180 80",
                e: "[M 10.0 80.0, Q 52.5 10.0, 95.0 80.0, Q 137.5 150.0, 180.0 80.0]"
            ),
            (
                d: "M 10 80 Q 52.5 10, 95 80 T 180 80",
                e: "[M 10.0 80.0, Q 52.5 10.0, 95.0 80.0, Q 137.5 150.0, 180.0 80.0]"
            ),
            (
                d: "M 45 45 L 345 45 L 345 345 L 45 345 Z M 195 45 L 195 345 M 45 195 L 345 195",
                e:
                    "[M 45.0 45.0, L 345.0 45.0, L 345.0 345.0, L 45.0 345.0, Z, M 195.0 45.0, L 195.0 345.0, M 45.0 195.0, L 345.0 195.0]"
            ),
            (
                d: "M 250 100 A 45 45, 0, 1, 0, 295 145 L 295 100 Z",
                e: "[M 250.0 100.0, A 45.0 45.0 0.0 1 0 295.0 145.0, L 295.0 100.0, Z]"
            ),
        ]

        for item in cases {
            let res = SVGPathParser.shared.parse(d: item.d)
            #expect("\(res.segments)" == item.e)
        }
    }
}
